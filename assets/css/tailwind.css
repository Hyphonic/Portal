@import 'tailwindcss';
@config "../../tailwind.config.js";

:root {
	color-scheme: light dark;
}
html.dark {
	color-scheme: dark;
}

html {
	font-size: 110%;
}

h1,
h2,
h3,
h4,
h5,
h6 {
	font-family: 'Cinzel Decorative', serif;
}

p,
span,
a,
li,
div,
input,
button,
textarea {
	font-family: 'Asul', sans-serif;
}

body {
	font-family: inherit;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

.card-hover {
	@apply transition-transform duration-300 hover:scale-105 hover:skew-0 hover:rotate-0;
}

.animate-bob:hover {
	animation: none !important;
}

@layer base {
	/* Robust: place background on html::before so it's always visible */
	html.dark::before,
	:root[saved-theme='dark']::before,
	:root[data-color-mode='dark']::before,
	html[data-theme='dark']::before {
		content: '';
		position: fixed;
		inset: 0;
		z-index: 0; /* sits behind page content but above body-bg painting issues */
		pointer-events: none;
		background:
			linear-gradient(rgba(6, 6, 10, 0.82), rgba(6, 6, 10, 0.82)),
			radial-gradient(ellipse at center, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.6) 100%),
			url('/images/index-dark.webp') center/cover no-repeat fixed;
		-webkit-backdrop-filter: blur(2px);
		backdrop-filter: blur(2px);
		will-change: transform;
	}

	@media (max-width: 767px) {
		/* mobile: avoid fixed background to prevent jump when address bar shows/hides */
		html.dark::before,
		:root[saved-theme='dark']::before,
		:root[data-color-mode='dark']::before,
		:root[data-color-mode='dark']::before {
			/* use scroll attachment and explicit positioning/size */
			background-image:
				linear-gradient(rgba(6, 6, 10, 0.82), rgba(6, 6, 10, 0.82)),
				radial-gradient(ellipse at center, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.6) 100%),
				url('/images/index-dark.webp');
			background-position:
				center center,
				center center,
				center center;
			background-repeat: no-repeat, no-repeat, no-repeat;
			background-size: cover, cover, cover;
			background-attachment: scroll, scroll, scroll; /* <--- important: remove 'fixed' on mobile */
			-webkit-backdrop-filter: blur(1px);
			backdrop-filter: blur(1px);
		}

		/* keep page content above the background */
		body > * {
			position: relative;
			z-index: 10;
		}
	}

	/* Ensure page content renders above the background */
	body > * {
		position: relative;
		z-index: 10;
		background-color: transparent; /* ensure no opaque container hides bg */
	}

	/* Optional: ensure header/footer/main specifically above */
	header,
	main,
	footer,
	#nav-container {
		position: relative;
		z-index: 11;
		background-color: transparent;
	}

	/* ---------- Light background using same image (light variant) ---------- */
/* use a ::before layer like dark, but with a lighter veil */
html:not(.dark)::before,
:root[saved-theme='light']::before,
:root[data-color-mode='light']::before,
html[data-theme='light']::before {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 0; /* behind UI */
  pointer-events: none;
  background:
    linear-gradient(rgba(255,255,255,0.60), rgba(255, 255, 255, 0.87)), /* lighter veil */
    radial-gradient(ellipse at center, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.06) 100%),
    url('/images/index-light.webp') center/cover no-repeat fixed;
  -webkit-backdrop-filter: blur(1px);
  backdrop-filter: blur(1px);
  will-change: transform;
}

/* ---------- Mobile fallback: disable fixed attachment for both modes ---------- */
@media (max-width: 767px) {
  /* dark mobile fallback (already present) */
  html.dark::before,
  :root[saved-theme='dark']::before,
  :root[data-color-mode='dark']::before,
  html[data-theme='dark']::before,
  /* light mobile fallback */
  html:not(.dark)::before,
  :root[saved-theme='light']::before,
  :root[data-color-mode='light']::before,
  html[data-theme='light']::before {
    /* remove 'fixed' on small screens to avoid address-bar jumps */
    background-attachment: scroll;
    background-position: center;
    background-size: cover;
    -webkit-backdrop-filter: blur(1px);
    backdrop-filter: blur(1px);
  }

  /* keep page content above the background */
  body > * {
    position: relative;
    z-index: 10;
  }
}
}
